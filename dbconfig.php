<?php
    require 'vendor/autoload.php';

    use Kreait\Firebase\Factory;
    use Kreait\Firebase\ServiceAccount;
    use Kreait\Firebase\Auth;
    
// $firebase = (new Factory)
// ->withServiceAccount('authentication-php-firebase-adminsdk-vj6un-aa68f86e1c.json')
// ->withProjectId('my-project')
// ->withDatabaseUri('https://authentication-php-default-rtdb.asia-southeast1.firebasedatabase.app/');
$scheme = isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on' ? 'https' : 'http';

// ///////////////////
$host= $_SERVER['HTTP_HOST'];
$currentUrl = $scheme . '://' . $host;
// echo $currentUrl;
    $serviceAccount = ServiceAccount::fromJsonFile(__Dir__.'/dengue-fever-database-6da72-firebase-adminsdk-96c66-8cdfbb7728.json');
    // $serviceAccount = ServiceAccount::fromJsonFile('/dengue-fever-database-6da72-firebase-adminsdk-96c66-8cdfbb7728.json');
    $firebase=(new Factory)
        ->withServiceAccount($serviceAccount)
        ->withDatabaseUri('https://dengue-fever-database-6da72-default-rtdb.asia-southeast1.firebasedatabase.app/')
        ->Create();
        ///////////////////////////////////////
  // $serviceAccount = ServiceAccount::fromJsonFile(__DIR__.'/test.json');
  //   $firebase=(new Factory)
  //       ->withServiceAccount($serviceAccount)
  //       ->withDatabaseUri('https://authentication-php-default-rtdb.asia-southeast1.firebasedatabase.app/')
  
  //       ->Create();
  
//   $firebase=(new Factory)
//       ->withServiceAccount(__DIR__.'/dengue-fever-database-6da72-firebase-adminsdk-96c66-8cdfbb7728.json')
//       ->withDatabaseUri('https://dengue-fever-database-6da72-default-rtdb.asia-southeast1.firebasedatabase.app/');
//       //->Create();

//       $auth = $firebase->createAuth();
//         $database = $firebase->createDatabase();

    $database = $firebase->getDatabase();

    // $auth = $firebase->getAuth();
// $realtimeDatabase = $factory->createDatabase();
// $cloudMessaging = $factory->createMessaging();
// $remoteConfig = $factory->createRemoteConfig();
// $cloudStorage = $factory->createStorage();
// $firestore = $factory->createFirestore();
?>
<!-- The core Firebase JS SDK is always required and must be listed first -->
